generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("MONGODB_URI")
}

model Employee {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  name        String
  employeeId  String   @unique
  department  String
  designation String
  type        String
  status      String
  avatar      String?
  createdAt   DateTime @default(now())

  personalInfo PersonalInfoEmbedded
  professional ProfessionalInfoEmbedded
  documents    DocumentSetEmbedded
  accounts     AccountLinksEmbedded

  // now an opposite relation for Attendance:
  attendances Attendance[] @relation("EmployeeAttendances")
}

model Attendance {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  employee   Employee @relation("EmployeeAttendances", fields: [employeeId], references: [id])
  employeeId String   @db.ObjectId
  date       DateTime
  checkIn    DateTime
  checkOut   DateTime
  breakTime  String?
  workHours  String?
  status     String
  createdAt  DateTime @default(now())
}

type PersonalInfoEmbedded {
  email         String
  phone         String
  dob           String
  maritalStatus String
  gender        String
  nationality   String
  address       String
  city          String
  state         String
  zipCode       String
}

type ProfessionalInfoEmbedded {
  username       String
  joiningDate    String
  workingDays    String
  officeLocation String
}

type DocumentSetEmbedded {
  appointmentLetter String?
  salarySlip        String?
  relievingLetter   String?
  experienceLetter  String?
}

type AccountLinksEmbedded {
  email    String
  slackId  String
  skypeId  String
  githubId String
}

model User {
  id           String    @id @default(auto()) @map("_id") @db.ObjectId
  name         String?
  email        String?   @unique
  password     String?
  role         String
  otp          String?
  otpExpiresAt DateTime?
  createdAt    DateTime  @default(now())
}
